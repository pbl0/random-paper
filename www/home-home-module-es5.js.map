{"version":3,"sources":["webpack:///capacitor-wallpaper-plugin/dist/esm/index.js","webpack:///capacitor-wallpaper-plugin/dist/esm/web.js","webpack:///src/app/home/home.page.html","webpack:///src/app/home/home-routing.module.ts","webpack:///src/app/home/home.module.ts","webpack:///src/app/home/home.page.scss","webpack:///src/app/home/home.page.ts"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","WallpaperWeb","name","platforms","options","console","log","Wallpaper","routes","path","component","HomePageRoutingModule","imports","forChild","exports","HomePageModule","declarations","Browser","Toast","Share","StatusBar","HomePage","settingsService","transfer","file","base64","loadingService","cachePath","cacheDirectory","isImgLoaded","setOverlaysWebView","overlay","service","pickRandomService","presentLoading","getPicture","subscribe","resp","download","showToast","getBase64","wallpaper","wall","fileTransfer","create","fileName","Date","getTime","toString","origin","entry","toURL","url","convertFileSrc","author","error","filePath","type","encodeFile","base64File","setPaper","split","err","echo","ret","moveFile","dataDirectory","dismiss","open","setTimeout","msg","show","text","share","title","dialogTitle","shareRet","selector","template"],"mappings":"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","file":"home-home-module-es5.js","sourcesContent":["export * from './web';\n//# sourceMappingURL=index.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { WebPlugin } from '@capacitor/core';\nexport class WallpaperWeb extends WebPlugin {\n    constructor() {\n        super({\n            name: 'Wallpaper',\n            platforms: ['web'],\n        });\n    }\n    echo(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log('ECHO', options);\n            return options;\n        });\n    }\n}\nconst Wallpaper = new WallpaperWeb();\nexport { Wallpaper };\nimport { registerWebPlugin } from '@capacitor/core';\nregisterWebPlugin(Wallpaper);\n//# sourceMappingURL=web.js.map","export default \"<ion-content [fullscreen]=\\\"true\\\">\\n  <ion-header collapse=\\\"condense\\\">\\n    <ion-toolbar>\\n      <ion-title size=\\\"large\\\">Blank</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n  <div class=\\\"imgbox\\\" *ngIf=\\\"wallpaper\\\">\\n    <ion-img\\n\\n      [ngClass]=\\\"{ \\n        'animate__fadeInDownBig': isImgLoaded,\\n        'animate__fadeOutDownBig': !isImgLoaded\\n      }\\\"\\n      class=\\\"center-fit animate__animated animate__fast\\\"\\n      (ionImgDidLoad)=\\\"imgLoad()\\\"\\n      (ionImgWillLoad)=\\\"isImgLoaded = false\\\"\\n      [src]=\\\"wallpaper.url\\\"\\n    ></ion-img>\\n  </div>\\n\\n  <!-- <ion-img *ngIf=\\\"file.dataDirectory  + 'wall.png'\\\" [src]=\\\"getPath(file.externalApplicationStorageDirectory + 'wall.png')\\\"></ion-img> -->\\n\\n  <ion-fab\\n    vertical=\\\"bottom\\\"\\n    horizontal=\\\"center\\\"\\n    slot=\\\"fixed\\\"\\n  >\\n    <ion-fab-button\\n    class=\\\"animate__animated animate__pulse animate__infinite animate__slow\\\"\\n    #fab (click)=\\\"onClickRandom()\\\">\\n      <ion-icon name=\\\"shuffle-outline\\\"></ion-icon>\\n    </ion-fab-button>\\n    \\n  </ion-fab>\\n\\n  <ion-fab *ngIf=\\\"isImgLoaded\\\"\\n    vertical=\\\"bottom\\\"\\n    horizontal=\\\"end\\\"\\n    slot=\\\"fixed\\\"\\n    class=\\\"animate__animated animate__fadeInDown\\\">\\n    <ion-fab-button size=\\\"small\\\" (click)=\\\"clickChangePaper()\\\" color=\\\"light\\\">\\n      <ion-icon name=\\\"image-outline\\\"></ion-icon>\\n    </ion-fab-button>\\n    <ion-fab-button size=\\\"small\\\" (click)=\\\"clickChangeLock()\\\" color=\\\"light\\\">\\n      <ion-icon name=\\\"lock-closed-outline\\\"></ion-icon>\\n    </ion-fab-button>\\n    <ion-fab-button size=\\\"small\\\" (click)=\\\"clickShare()\\\" color=\\\"light\\\">\\n      <ion-icon name=\\\"share-social-outline\\\"></ion-icon>\\n    </ion-fab-button>\\n  </ion-fab>\\n\\n  <ion-fab\\n    class=\\\"animate__animated animate__fadeInUp\\\"\\n    horizontal=\\\"start\\\"\\n    vertical=\\\"bottom\\\"\\n    slot=\\\"fixed\\\"\\n  >\\n    <ion-fab-button color=\\\"light\\\">\\n      <ion-icon md=\\\"caret-up\\\" ios=\\\"chevron-up-circle-outline\\\"></ion-icon>\\n    </ion-fab-button>\\n    <ion-fab-list side=\\\"top\\\">\\n      <ion-fab-button (click)=\\\"onClickDonate()\\\" color=\\\"light\\\">\\n        <ion-icon name=\\\"heart\\\"></ion-icon>\\n      </ion-fab-button>\\n\\n      <ion-fab-button color=\\\"light\\\" (click)=\\\"onClickGithub()\\\">\\n        <ion-icon name=\\\"logo-github\\\"></ion-icon>\\n      </ion-fab-button>\\n\\n      <ion-fab-button [routerLink]=\\\"['/settings']\\\" color=\\\"light\\\">\\n        <ion-icon name=\\\"settings\\\"></ion-icon>\\n      </ion-fab-button>\\n    </ion-fab-list>\\n  </ion-fab>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { HomePage } from './home.page';\n\nimport { HomePageRoutingModule } from './home-routing.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","export default \".imgbox {\\n  display: grid;\\n  height: 100%;\\n}\\n\\n.center-fit {\\n  max-height: 100vh;\\n  margin: auto;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS9ob21lLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7RUFDQSxZQUFBO0FBQ0Y7O0FBQ0E7RUFFRSxpQkFBQTtFQUNBLFlBQUE7QUFDRiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaW1nYm94IHtcbiAgZGlzcGxheTogZ3JpZDtcbiAgaGVpZ2h0OiAxMDAlO1xufVxuLmNlbnRlci1maXQge1xuICBcbiAgbWF4LWhlaWdodDogMTAwdmg7XG4gIG1hcmdpbjogYXV0bztcbn1cbiJdfQ== */\";","import { Component, OnInit, ViewChild } from \"@angular/core\";\n\nimport {\n  FileTransfer,\n  FileTransferObject,\n} from \"@ionic-native/file-transfer/ngx\";\nimport { File } from \"@ionic-native/file/ngx\";\nimport { Base64 } from \"@ionic-native/base64/ngx\";\n\nimport { Capacitor, Plugins } from \"@capacitor/core\";\nimport \"capacitor-wallpaper-plugin\";\nimport { IonFab } from \"@ionic/angular\";\nimport { SettingsService } from \"../services/settings.service\";\n\nimport { Wallpaper } from \"../interfaces/wallpaper\";\nimport { LoadingService } from '../services/loading.service';\n\n\nconst { Wallpaper } = Plugins;\nconst { Browser } = Plugins;\nconst { Toast } = Plugins;\nconst { Share } = Plugins;\nconst { StatusBar } = Plugins;\n@Component({\n  selector: \"app-home\",\n  templateUrl: \"home.page.html\",\n  styleUrls: [\"home.page.scss\"],\n})\nexport class HomePage {\n  wallpaper: Wallpaper;\n  history: Wallpaper[];\n  cachePath: string = this.file.cacheDirectory + \"walls/\";\n\n  isImgLoaded = false;\n\n  @ViewChild(\"fab\") ionFab: IonFab;\n\n  constructor(\n    private settingsService: SettingsService,\n    private transfer: FileTransfer,\n    public file: File,\n    private base64: Base64,\n    private loadingService: LoadingService,\n    \n  ) {\n    \n  }\n  ionViewWillEnter(){\n    StatusBar.setOverlaysWebView({\n      overlay: true\n    })\n  }\n\n  onClickRandom() {\n    let service = this.settingsService.pickRandomService();\n\n    if (service) {\n      this.loadingService.presentLoading();\n      service.getPicture().subscribe((resp: Wallpaper) => {\n        // this.wallpaper.author = resp.author;\n        this.download(resp);\n        console.log(\"HomePage -> onClickRandom -> this.wallpaper\", resp);\n      });\n    } else {\n      console.log(\"No service active\");\n      this.showToast(\"There are no available sources\");\n    }\n  }\n\n  clickChangePaper() {\n    this.loadingService.presentLoading();\n    this.getBase64(this.wallpaper.path, \"wall\");\n    // this.download();\n  }\n\n  clickChangeLock() {\n    // TODO: test on non-MIUI system\n    this.loadingService.presentLoading();\n    this.getBase64(this.wallpaper.path, \"lock\");\n    // this.download();\n  }\n\n  download(wall: Wallpaper) {\n    const fileTransfer: FileTransferObject = this.transfer.create();\n    // const url = this.wallpaper.url;\n    const fileName = new Date().getTime().toString() + \".png\";\n    const path = this.cachePath + fileName;\n    fileTransfer.download(wall.origin, path).then(\n      (entry) => {\n        console.log(\"download complete: \" + entry.toURL());\n\n        this.wallpaper = {\n          url: Capacitor.convertFileSrc(path),\n          author: wall.author,\n          path: path,\n          fileName: fileName,\n          origin: wall.origin,\n        };\n\n        // this.myPath = path;\n        // this.getBase64(path);\n      },\n      (error) => {\n        // TODO: handle error\n        console.log(error);\n      }\n    );\n  }\n\n  getBase64(filePath: string, type: string) {\n    this.base64.encodeFile(filePath).then(\n      (base64File: string) => {\n        console.log(base64File);\n        if (base64File) {\n          this.setPaper(base64File.split(\",\")[1], type);\n        }\n      },\n      (err) => {\n        console.log(err);\n      }\n    );\n  }\n\n  setPaper(path: string, type: string) {\n    Wallpaper.echo({ value: path, type: type }).then((ret) => {\n      console.log(\"HomePage -> clickChangePaper -> ret\", ret);\n      this.file\n        .moveFile(\n          this.cachePath,\n          this.wallpaper.fileName,\n          this.file.dataDirectory,\n          \"currentWall.png\"\n        )\n        .then(\n          (entry) => {\n            this.loadingService.dismiss();\n            if (type == 'wall'){\n              this.showToast(\"Wallpaper has been set\");\n            } else if ('lock') {\n              this.showToast(\"Lockscreen wallpaper has been set\");\n            }\n            \n          },\n          (error) => {\n            // TODO: handle error\n            console.log(error);\n            this.showToast(\"Error\");\n          }\n        );\n    });\n  }\n\n  async onClickDonate() {\n    await Browser.open({ url: \"https://www.paypal.com/donate?hosted_button_id=UGXMR9D6PE56W\" });\n  }\n\n\n\n  async onClickGithub() {\n    await Browser.open({ url: \"https://github.com/pbl0/randomPaper\" });\n  }\n\n  imgLoad() {\n    setTimeout(() => {\n      this.isImgLoaded = true;\n      this.loadingService.dismiss();\n    }, 200);\n  }\n\n  async showToast(msg: string) {\n    await Toast.show({\n      text: msg,\n    });\n  }\n  async clickShare() {\n    let shareRet = await Share.share({\n      title: \"Share with buddies\",\n      text: \"Check this amazing wallpaper I found in randomPaper app: https://github.com/pbl0/randomPaper\",\n      url: this.wallpaper.path,\n      dialogTitle: \"Share with buddies\",\n    });\n  }\n}\n"]}